TurtleCraft={}TurtleCraft.Services={}TurtleCraft.Modules={}TurtleCraft.__index=TurtleCraft;function TurtleCraft.new(a,b,c)local self=setmetatable({},TurtleCraft)function self.start()term.clear()term.setCursorPos(1,1)term.write('=====================')term.write('= TurtleCraft 2.0.0 =')term.write('= by DataDink       =')term.write('=====================')term.write('Starting TurtleCraft')term.write('Hello!')os.sleep(5)c.init()b.init()a.init()term.clear()term.write('Exiting TurtleCraft')term.write('Goodbye!')end;return self end;TurtleCraft.Config={appTitle="TurtleCraft 2.0"}TurtleCraft.Config.displayWidth,TurtleCraft.Config.displayHeight=term.getSize()TurtleCraft.Config.maxMenuDisplay=TurtleCraft.Config.displayHeight-5;TurtleCraft.Config.appHeader=string["repeat"]("=",TurtleCraft.Config.displayWidth).."\n".."= "..TurtleCraft.Config.appTitle.."\n"..string["repeat"]("=",TurtleCraft.Config.displayWidth)TurtleCraft.Config.appHeaderHeight=3;TurtleCraft.Services.Locator={new=function()local d={}local self=setmetatable({},{__newindex=function(e,f)if type(f)=="function"then d[e]=f else d[e]=function()return f end end end,__index=function(e)if d[e]then return d[e]()end;return nil end})end}TurtleCraft.Services.Menu={}TurtleCraft.Services.Menu.__index=TurtleCraft.Services.Menu;function TurtleCraft.Services.Menu.new(g,h)local self=setmetatable({},TurtleCraft.Services.Menu)local i={}local j=""local k=1;function self.register(j,l)i[h.path.normalize(j)]=l end;function self.navigate(m)j=h.path.normalize(j)..h.path.normalize(m)return i[j]end;function self.back()j=h.path.regress(j,1)return i[j]end;function self.init()while true do render()local n,e=os.pullEvent("key")local o=getScope()if e==keys.up then k=math.max(1,k-1)elseif e==keys.down then k=math.min(table.getn(o),k+1)elseif e==keys.left then return self.back()elseif e==keys.right or e==keys.enter or e==keys.numPadEnter then o[k].action()end end end;local function getScope()local o={}for p,q in pairs(i)do local select=h.path.select(p,j)if select.next then if select.remainder then o[select.next]=function()self.navigate(select.next)end else o[select.next]=q end end end;local i={}for r,l in pairs(o)do table.insert(i,{name=r,action=l})end;return i end;local function render()local o=getScope()local s=table.getn(o)local t=s-g.maxMenuDisplay;local u=k-math.floor(g.maxMenuDisplay/2)u=math.min(u,t)u=math.max(1,u)local v=math.min(s,u+g.maxMenuDisplay)term.clear()term.setCursorPos(1,1)term.write(g.appHeader)term.setCursorPos(1,g.appHeaderHeight+1)for w=u,v do local m=o[w]local x=w==k;local y=""if x then y=y.."> "else y=y.."  "end;y=y..m.name;term.write(y)end;term.setCursorPos(1,g.displayHeight)term.write("--- Use Arrow / Enter Keys")end end;TurtleCraft.Services.Resume={}TurtleCraft.Services.Resume.__index=TurtleCraft.Services.Resume;TurtleCraft.Services.Resume.new=function(a)local self=setmetatable({},TurtleCraft.Services.Resume)end;TurtleCraft.Services.Utils={string={split=function(z,A)z=string.gsub(z,"%%","%%")z=string.gsub(z,"%(","%(")z=string.gsub(z,"%)","%)")z=string.gsub(z,"%.","%.")z=string.gsub(z,"%+","%+")z=string.gsub(z,"%-","%-")z=string.gsub(z,"%*","%*")z=string.gsub(z,"%?","%?")z=string.gsub(z,"%[","%[")z=string.gsub(z,"%^","%^")z=string.gsub(z,"%$","%$")return string.gmatch("[^"..z.."]+")end},path={split=function(j)return string.gmatch(j or"","[^/]+")end,normalize=function(j)local B=TurtleCraft.Helpers.Utils.path.split(j)return table.concat(B,"/").."/"end,select=function(j,C)local D=ipairs(TurtleCraft.Helpers.Utils.path.split(j))local E=ipairs(TurtleCraft.Helpers.Utils.path.split(C))local F=D()local G=E()local H={root=""}while F and G and string.lower(F)==string.lower(G)do H.root=H.root..F;F=D()G=E()end;if not F then return H end;H.target=F;F=D()H.next=F;while F do H.remainder=(H.remainder or"")..F;F=D()end;return H end,combine=function(I,j)return TurtleCraft.Helpers.Utils.normalize(I)..TurtleCraft.Helpers.Utils.normalize(j)end,regress=function(j,...)local J=select(1,...)or 1;local B=TurtleCraft.Helpers.Utils.path.split(j)for K=0,J do if table.getn(B)==0 then return""end;table.remove(B,table.getn(B))end;return table.concat(B,"/").."/"end}}(function(L)L["config"]=TurtleCraft.Config;L["utils"]=TurtleCraft.Services.Utils;L["resume"]=TurtleCraft.Services.Resume.new()L["menu"]=TurtleCraft.Services.Menu.new(L["config"],L["utils"])L["application"]=function()return TurtleCraft.new(L["menu"],L["resume"],L["position"])end;L["modules"]={}for n,M in TurtleCraft.Modules do table.insert(L["modules"],M(L))end end)(TurtleCraft.Services.Locator.new())